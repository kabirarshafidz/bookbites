<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BookBites</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Dangrek&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <form action="/" method="get">
      <button type="submit" class="btn btn-success accent ms-5 mt-4">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          height="24px"
          viewBox="0 -960 960 960"
          width="24px"
          fill="#fdfcf7"
        >
          <path
            d="M280-200v-80h284q63 0 109.5-40T720-420q0-60-46.5-100T564-560H312l104 104-56 56-200-200 200-200 56 56-104 104h252q97 0 166.5 63T800-420q0 94-69.5 157T564-200H280Z"
          />
        </svg>
        Back
      </button>
    </form>
    <div
      class="container d-flex flex-column align-items-center"
      style="height: 75vh"
    >
      <% if (locals.book) { %>
      <h1 class="title"><%= heading %></h1>
      <form action="/edit/<%= book.id %>" method="post" style="height: 100%">
        <div class="row">
          <div class="col-12 mb-2">
            <input
              name="title"
              type="text"
              required
              value="<%= book.title %>"
            />
          </div>
          <div class="col-2">
            <input
              name="isbn"
              type="number"
              onkeypress="return /[0-9]/i.test(event.key)"
              minlength="10"
              maxlength="13"
              value="<%= book.isbn %>"
            />
          </div>
          <div class="col-4">
            <input name="author" type="text" value="<%= book.author %>" />
          </div>
          <div class="col-4 d-flex align-items-center">
            <p class="m-0 me-3 ms-2">Date read:</p>
            <input
              name="date"
              type="date"
              required
              style="width: 75%"
              value="<%= book.date %>"
            />
          </div>
          <div class="col-2">
            <input
              name="rating"
              type="number"
              onkeypress="return /[0-9||.]/i.test(event.key)"
              min="0"
              max="10"
              step="0.1"
              value="<%= book.rating %>"
            />
          </div>
          <div class="col-12 mt-2">
            <textarea name="note" type="text" maxlength="500" rows="10">
                <%= book.note %>
            </textarea>
          </div>
          <div class="col-12">
            <button type="submit" class="btn btn-success primary">
              <%= submit%>
            </button>
          </div>
        </div>
      </form>
      <% } else { %>
      <h1 class="title"><%= heading %></h1>
      <form action="/new" method="post" style="height: 100%">
        <div class="row">
          <div class="col-12 mb-2">
            <input name="title" type="text" placeholder="Title" required />
          </div>
          <div class="col-2">
            <input
              name="isbn"
              type="number"
              placeholder="ISBN-10 or ISBN-13"
              onkeypress="return /[0-9]/i.test(event.key)"
              minlength="10"
              maxlength="13"
            />
          </div>
          <div class="col-4">
            <input name="author" type="text" placeholder="Author" />
          </div>
          <div class="col-4 d-flex align-items-center">
            <p class="m-0 me-3 ms-2">Date read:</p>
            <input name="date" type="date" required style="width: 75%" />
          </div>
          <div class="col-2">
            <input
              name="rating"
              type="number"
              onkeypress="return /[0-9||.]/i.test(event.key)"
              min="0"
              max="10"
              step="0.1"
              placeholder="Rating: /10"
            />
          </div>
          <div class="col-12 mt-2">
            <textarea
              name="note"
              type="text"
              placeholder="Write your note! (max: 500 characters)"
              maxlength="500"
              rows="10"
            ></textarea>
          </div>
          <div class="col-12">
            <button type="submit" class="btn btn-success primary">
              <%= submit%>
            </button>
          </div>
        </div>
      </form>
      <% } %>
    </div>
  </body>
</html>
